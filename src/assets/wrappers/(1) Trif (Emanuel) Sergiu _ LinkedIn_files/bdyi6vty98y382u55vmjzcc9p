define.alias("artdeco-button/components/artdeco-button","msg-spinmail/components/artdeco-button")
define.alias("artdeco-loader/components/artdeco-loader","msg-spinmail/components/artdeco-loader")
define("msg-spinmail/components/legal-text",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@glimmer/component","global-utils/utils/html-safe","msg-shared/utils/constants","global-utils/utils/is-browser"],(function(e,t,n,a,s,i,r,o,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var m,c,d,p,u,g,b,f
const h=Ember.HTMLBars.template({id:"Yqe1pVZK",block:'{"symbols":["@isSponsoredConversation","&attrs","@actionTrackingPrefix"],"statements":[[6,[37,2],[[30,[36,9],[[30,[36,6],[[32,0,["staticLegalText"]]],null],[32,0,["customLegalText"]]],null]],null,[["default","else"],[{"statements":[[2,"  "],[11,"div"],[24,0,"msg-spinmail-thread__legal-container"],[17,2],[4,[38,3],["click",[32,0,["handleClick"]]],null],[12],[2,"\\n"],[6,[37,2],[[32,0,["customLegalText"]]],null,[["default"],[{"statements":[[2,"      "],[10,"div"],[14,0,"msg-spinmail-thread__legal-text text-body-xsmall"],[14,"data-spinmail-trackingtype","customLegalTextTracking"],[12],[2,"\\n"],[6,[37,2],[[32,1]],null,[["default","else"],[{"statements":[[2,"          "],[1,[30,[36,1],[[32,0,["customLegalText"]]],null]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"          "],[1,[32,0,["customLegalText"]]],[2,"\\n"]],"parameters":[]}]]],[2,"      "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"  "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,2],[[30,[36,8],[[32,0,["staticLegalText"]],[32,0,["customLegalText"]]],null]],null,[["default"],[{"statements":[[2,"    "],[11,"div"],[24,0,"msg-spinmail-thread__legal-container"],[17,2],[4,[38,3],["click",[32,0,["handleClick"]]],null],[12],[2,"\\n"],[6,[37,2],[[32,0,["isLegalTextExpanded"]]],null,[["default","else"],[{"statements":[[2,"        "],[10,"div"],[14,0,"flex-1"],[12],[2,"\\n"],[6,[37,2],[[32,0,["staticLegalText"]]],null,[["default"],[{"statements":[[2,"            "],[10,"div"],[14,0,"msg-spinmail-thread__legal-text text-body-xsmall"],[14,"data-spinmail-trackingtype","staticLegalTextTracking"],[12],[2,"\\n"],[6,[37,2],[[32,1]],null,[["default","else"],[{"statements":[[2,"                "],[1,[30,[36,0],null,[["type","class"],["adchoices-icon","msg-spinmail-thread__legal-text-ad-choices-icon"]]]],[2,"\\n                "],[10,"span"],[14,0,"msg-spinmail-thread__static-legal-content"],[12],[2,"\\n                  "],[1,[30,[36,1],[[32,0,["staticLegalText"]]],null]],[2,"\\n                "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[2,"                "],[1,[32,0,["staticLegalText"]]],[2,"\\n"]],"parameters":[]}]]],[2,"            "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"\\n"],[6,[37,2],[[32,0,["customLegalText"]]],null,[["default"],[{"statements":[[2,"            "],[10,"div"],[14,0,"msg-spinmail-thread__legal-text text-body-xsmall"],[14,"data-spinmail-trackingtype","customLegalTextTracking"],[12],[2,"\\n"],[6,[37,2],[[32,1]],null,[["default","else"],[{"statements":[[2,"                "],[1,[30,[36,1],[[32,0,["customLegalText"]]],null]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"                "],[1,[32,0,["customLegalText"]]],[2,"\\n"]],"parameters":[]}]]],[2,"            "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"        "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[6,[37,2],[[32,0,["truncatedLegalText"]]],null,[["default"],[{"statements":[[2,"        "],[10,"div"],[14,0,"msg-spinmail-thread__legal-text truncated t-12 flex-1 display-flex"],[14,"data-spinmail-trackingtype","staticLegalTextTracking"],[12],[2,"\\n"],[6,[37,2],[[32,1]],null,[["default","else"],[{"statements":[[2,"            "],[1,[30,[36,0],null,[["type","class"],["adchoices-icon","msg-spinmail-thread__legal-text-ad-choices-icon"]]]],[2,"\\n            "],[10,"span"],[14,0,"msg-spinmail-thread__truncated-legal-content"],[12],[2,"\\n              "],[1,[30,[36,1],[[32,0,["truncatedLegalText"]]],null]],[2,"\\n            "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[2,"            "],[10,"span"],[14,0,"msg-spinmail-thread__truncated-legal-content"],[12],[2,"\\n              "],[1,[32,0,["truncatedLegalText"]]],[2,"\\n            "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"        "],[13],[2,"\\n      "]],"parameters":[]}]]]],"parameters":[]}]]],[2,"      "],[8,"artdeco-button@artdeco-button",[[16,"aria-label",[30,[36,2],[[32,0,["isLegalTextExpanded"]],[30,[36,4],["i18n_collapse_legal_text","msg-spinmail/components/legal-text"],null],[30,[36,4],["i18n_expand_legal_text","msg-spinmail/components/legal-text"],null]],null]],[16,"data-control-name",[30,[36,5],[[32,3],[30,[36,2],[[32,0,["isLegalTextExpanded"]],"collapse_spinmail_legal","expand_spinmail_legal"],null]],null]]],[["@circle","@class","@color","@controlType","@icon","@type","@click","@size"],[true,"msg-spinmail-thread__legal-text-expand","muted","button",[30,[36,2],[[32,0,["isLegalTextExpanded"]],"chevron-down-icon","chevron-up-icon"],null],"tertiary",[30,[36,7],[[32,0],"isLegalTextExpanded",[30,[36,6],[[32,0,["isLegalTextExpanded"]]],null]],null],1]],null],[2,"\\n    "],[13],[2,"\\n"]],"parameters":[]}]]]],"parameters":[]}]]]],"hasEval":false,"upvars":["artdeco-icons-web@li-icon","text-view-model@text-view-model","if","on","t","concat","global-helpers@not","ember-set-helper@set","global-helpers@or","global-helpers@and"]}',moduleName:"msg-spinmail/components/legal-text.hbs"}),{SPONSORED_TRACKING:{ACTIONS:v}}=o.default
let _=(m=Ember.inject.service("global-services@global-http-headers"),c=Ember.inject.service("msg-spinmail-data@sponsored-action-tracking"),d=Ember._tracked,p=Ember._action,u=class extends i.default{constructor(){super(...arguments);(0,t.default)(this,"globalHttpHeaders",g,this);(0,t.default)(this,"sponsoredActionTracking",b,this);(0,t.default)(this,"isLegalTextExpanded",f,this)}get customLegalText(){if(this.args.isSponsoredConversation)return Ember.get(this.args,"legalText.advertiserLegalText")
const e=Ember.get(this.args,"legalText.customLegalText")
return e?(0,r.default)(e):""}get staticLegalText(){if(this.args.isSponsoredConversation)return Ember.get(this.args,"legalText.linkedInLegalText")
const e=Ember.get(this.args,"legalText.staticLegalText"),t=e?jSecure.mk`${new jSecure.UnsafeString(e)}`:""
return t?(0,r.default)(t):""}get truncatedLegalText(){if(this.args.isSponsoredConversation)return Ember.get(this.args,"legalText.linkedInLegalText")||""
const e=Ember.get(this.args,"legalText.staticLegalText")
if(e&&l.default){const t=document.createElement("div")
jSecure.setElementContent(t,e)
let n=t.querySelector(".truncate")
n?n.classList.remove("truncate"):n=t
const a=n.innerHTML
return a?(0,r.default)(a):""}return""}handleClick(e){const{target:t}=e,n=t.closest("a"),a=Ember.get(this.args,"legalText.clickTrackingUrl")
if(n&&a&&this.args.conversation){const e="data-spinmail-trackingtype",n="customLegalTextTracking"===t.closest(`[${e}]`).getAttribute(e)?v.CUSTOM_LEGAL_TEXT_CLICK:v.STATIC_LEGAL_TEXT_CLICK
this.sponsoredActionTracking.fireConversationTracking(this.globalHttpHeaders,a,n,this.args.conversation,"spin_privacy_policy")}}},g=(0,a.default)(u.prototype,"globalHttpHeaders",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=(0,a.default)(u.prototype,"sponsoredActionTracking",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=(0,a.default)(u.prototype,"isLegalTextExpanded",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,a.default)(u.prototype,"handleClick",[p],Object.getOwnPropertyDescriptor(u.prototype,"handleClick"),u.prototype),u)
e.default=_
Ember._setComponentTemplate(h,_)}))
define.alias("artdeco-icons-web/components/linkedin-logo","msg-spinmail/components/linkedin-logo")
define("msg-spinmail/components/spinmail-container",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const t=Ember.HTMLBars.template({id:"AvLSkOk2",block:'{"symbols":["@conversation","@redirectToActiveConversation"],"statements":[[8,"msg-spinmail@spinmail-thread",[[24,0,"flex-1 display-flex flex-column"]],[["@conversation","@actionTrackingPrefix","@redirectToActiveConversation","@isCompanySender"],[[32,1],"",[32,2],[30,[36,0],[[32,1,["participants","firstObject"]]],null]]],null]],"hasEval":false,"upvars":["msg-shared@is-company-profile"]}',moduleName:"msg-spinmail/components/spinmail-container.hbs"})
var n=Ember._setComponentTemplate(t,Ember._templateOnlyComponent())
e.default=n}))
define("msg-spinmail/components/spinmail-one-click-thank-you",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const t=Ember.HTMLBars.template({id:"Mssg4EKj",block:'{"symbols":["@spinmail","@isLeadGenFormSubmitted"],"statements":[[6,[37,2],[[32,2]],null,[["default"],[{"statements":[[2,"  "],[10,"div"],[14,0,"container mv5"],[12],[2,"\\n    "],[10,"div"],[14,0,"mb3"],[12],[2,"\\n      "],[1,[30,[36,1],null,[["type","animate","a11y-text","class"],["success-pebble-icon",true,[30,[36,0],["i18n_success","msg-spinmail/components/spinmail-one-click-thank-you"],null],"msg-spinmail-one-click-thank-you__success v-align-middle"]]]],[2,"\\n      "],[10,"span"],[14,0,"v-align-middle t-16 t-black t-bold"],[12],[2,"\\n        "],[1,[30,[36,0],["i18n_spinmail_one_click_thank_you_title","msg-spinmail/components/spinmail-one-click-thank-you"],[["companyName"],[[32,1,["subContent","leadGenForm","actor","miniCompany","name"]]]]]],[2,"\\n      "],[13],[2,"\\n    "],[13],[2,"\\n    "],[8,"rich-text@attributed-text",[],[["@attributedText"],[[32,1,["subContent","leadGenForm","thankYouMessage"]]]],null],[2,"\\n  "],[13],[2,"\\n"]],"parameters":[]}]]]],"hasEval":false,"upvars":["t","artdeco-icons-web@li-icon","if"]}',moduleName:"msg-spinmail/components/spinmail-one-click-thank-you.hbs"})
var n=Ember._setComponentTemplate(t,Ember._templateOnlyComponent())
e.default=n}))
define("msg-spinmail/components/spinmail-reply-form",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@glimmer/component","msg-shared/utils/constants","msg-spinmail-data/utils/lix"],(function(e,t,n,a,s,i,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var l,m,c,d,p,u,g,b,f,h,v,_,y,T,k
const E=Ember.HTMLBars.template({id:"WBXllz4L",block:'{"symbols":["assetLoader","@conversation","@actionURL","@trackingType","@isHeader","@actionText"],"statements":[[10,"div"],[14,0,"msg-spinmail-reply-form"],[12],[2,"\\n"],[6,[37,0],[[32,0,["showCTAButton"]]],null,[["default"],[{"statements":[[2,"    "],[11,"a"],[16,6,[32,3]],[16,"data-spinmail-trackingtype",[32,4]],[16,0,[31,["msg-spinmail-reply-form__action-link\\n        ",[30,[36,0],[[32,5],"artdeco-button"],null]]]],[24,"target","_blank"],[24,"rel","noopener noreferrer"],[4,[38,2],["click",[32,0,["openOneClickLeadGenForm"]]],null],[12],[2,"\\n      "],[10,"span"],[15,0,[30,[36,0],[[32,5],"msg-spinmail-reply-form__action-link-text-primary"],null]],[12],[2,"\\n        "],[1,[32,6]],[2,"\\n      "],[13],[2,"\\n\\n"],[6,[37,3],[[32,5]],null,[["default"],[{"statements":[[2,"        "],[10,"span"],[14,0,"msg-spinmail-reply-form__action-link-arrow v-align-middle"],[12],[2,"\\n          "],[1,[30,[36,1],null,[["type","size"],["arrow-right-icon","small"]]]],[2,"\\n        "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"    "],[13],[2,"\\n"]],"parameters":[]}]]],[13],[2,"\\n\\n"],[6,[37,0],[[32,0,["showOneClickModal"]]],null,[["default"],[{"statements":[[2,"  "],[8,"asset-loader@deferred-asset-loader",[],[["@bundle"],["lead-gen"]],[["default"],[{"statements":[[2,"\\n"],[6,[37,0],[[32,1,["state","fulfilled"]]],null,[["default"],[{"statements":[[2,"      "],[8,"lead-gen@lead-gen-modal",[],[["@isOpen","@leadGenForm","@leadTrackingParams","@closeModal","@pageKey","@leadTrackingCode"],[[32,0,["isLeadGenFormModalOpen"]],[32,2,["latestEvent","eventContent","customContent","subContent","leadGenForm"]],[32,0,["leadTrackingParams"]],[32,0,["onCloseModal"]],[32,0,["pageKey"]],[32,0,["leadTrackingCode"]]]],null],[2,"\\n"]],"parameters":[]}]]],[2,"  "]],"parameters":[1]}]]],[2,"\\n"]],"parameters":[]}]]]],"hasEval":false,"upvars":["if","artdeco-icons-web@li-icon","on","unless"]}',moduleName:"msg-spinmail/components/spinmail-reply-form.hbs"}),{SPINMAIL:{CUSTOM_CONTENT:C,LANDING_PAGE:x,TOUCHDOWN:L}}=r.default
let S=(l=Ember._tracked,m=Ember._tracked,c=Ember._tracked,d=Ember.inject.service("lix"),p=Ember.inject.service("msg-shared@component-context"),u=Ember.inject.service("tracking"),g=Ember._action,b=Ember._action,f=class extends i.default{constructor(){super(...arguments);(0,t.default)(this,"isLeadGenFormModalOpen",h,this);(0,t.default)(this,"leadTrackingParams",v,this);(0,t.default)(this,"leadTrackingCode",_,this);(0,t.default)(this,"lix",y,this);(0,t.default)(this,"msgComponentContextService",T,this);(0,t.default)(this,"tracking",k,this)}get showOneClickModal(){return this.args.isOneClickLeadGen&&!this.args.isLeadGenFormSubmitted}get showCTAButton(){const e=Ember.get(this.args,`${C}.spInmailType`)
return this.args.actionText&&(this.args.actionURL||this.args.isOneClickLeadGen)&&(e===L||e===x)}openOneClickLeadGenForm(){if(this.args.isOneClickLeadGen){const e=Ember.get(this.args,"conversation.latestEvent.eventContent.customContent.subContent.leadTrackingParams")
if(this.isTrackingDualWriteLixControl())this.leadTrackingParams=e
else if(this.isTrackingDualWriteTreatmentEnabled()){this.leadTrackingParams=e
this.initLeadTrackingCode(e)}else this.initLeadTrackingCode(e)
this.isLeadGenFormModalOpen=!0}}onCloseModal(e){if(e){var t,n
null===(t=(n=this.args).closeModal)||void 0===t||t.call(n,e)}else this.isLeadGenFormModalOpen=!1}isTrackingDualWriteLixControl(){return this.lix.getTreatment(o.LIX_MESSAGING_TRACKING_DUEL_WRITES.KEY)===o.LIX_MESSAGING_TRACKING_DUEL_WRITES.TREATMENTS.CONTROL}isTrackingDualWriteTreatmentEnabled(){return this.lix.getTreatment(o.LIX_MESSAGING_TRACKING_DUEL_WRITES.KEY)===o.LIX_MESSAGING_TRACKING_DUEL_WRITES.TREATMENTS.DUAL_WRITE}get pageKey(){const e=this.msgComponentContextService.isOverlay?"messaging_overlay":"not_messaging_overlay"
return`${this.tracking.getCurrentPageKey()}_${e}_spinmail_reply_form_lead_gen_form_in_messaging`}initLeadTrackingCode(e){const t=new URL(e).searchParams
this.leadTrackingCode=t.get("lTrk")}},h=(0,a.default)(f.prototype,"isLeadGenFormModalOpen",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=(0,a.default)(f.prototype,"leadTrackingParams",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=(0,a.default)(f.prototype,"leadTrackingCode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=(0,a.default)(f.prototype,"lix",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=(0,a.default)(f.prototype,"msgComponentContextService",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=(0,a.default)(f.prototype,"tracking",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.default)(f.prototype,"openOneClickLeadGenForm",[g],Object.getOwnPropertyDescriptor(f.prototype,"openOneClickLeadGenForm"),f.prototype),(0,a.default)(f.prototype,"onCloseModal",[b],Object.getOwnPropertyDescriptor(f.prototype,"onCloseModal"),f.prototype),f)
e.default=S
Ember._setComponentTemplate(E,S)}))
define("msg-spinmail/components/spinmail-thread",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@glimmer/component","global-utils/utils/get-location","global-utils/utils/html-safe","msg-shared/utils/constants","ember-batcher","global-utils/utils/is-browser","fetch"],(function(e,t,n,a,s,i,r,o,l,m,c,d){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var p,u,g,b,f,h,v,_,y,T,k,E,C,x,L,S,M,O,P,G,w,A,N
const I=Ember.HTMLBars.template({id:"eB+05czw",block:'{"symbols":["@conversation","@redirectToActiveConversation","@isCompanySender","@actionTrackingPrefix","&attrs"],"statements":[[11,"div"],[17,5],[24,0,"msg-spinmail-thread display-flex flex-column"],[4,[38,8],[[32,0,["handleRendering"]]],null],[4,[38,9],[[32,0,["handleRendering"]],[32,1]],null],[4,[38,9],[[32,0,["handleUpdating"]],[32,1]],null],[4,[38,10],["click",[32,0,["click"]]],null],[12],[2,"\\n"],[6,[37,5],[[32,0,["isConversationValid"]]],null,[["default","else"],[{"statements":[[2,"    "],[10,"div"],[14,0,"msg-spinmail-thread__top-banner display-flex justify-space-between pv2 ph3"],[12],[2,"\\n      "],[10,"div"],[14,0,"display-flex"],[12],[2,"\\n        "],[10,"p"],[14,0,"t-12 t-black--light t-normal"],[12],[2,"\\n          "],[1,[30,[36,5],[[32,1,["latestEvent","eventContent","customContent","advertiserLabel"]],[32,1,["latestEvent","eventContent","customContent","advertiserLabel"]],[30,[36,0],["i18n_sponsored","msg-spinmail/components/spinmail-thread"],null]],null]],[2,"\\n        "],[13],[2,"\\n      "],[13],[2,"\\n      "],[10,"time"],[14,0,"white-space-nowrap pl3 t-12 t-black--light t-normal"],[12],[2,"\\n        "],[1,[30,[36,6],[[32,1,["eventCollection","oldestEvent","createdAt"]]],[["format","useTimeZone"],["fmt_md_medium",true]]]],[2,"\\n      "],[13],[2,"\\n    "],[13],[2,"\\n    "],[10,"div"],[14,0,"msg-spinmail-thread__message-header p3"],[12],[2,"\\n      "],[10,"h3"],[14,0,"msg-spinmail-thread__message-subject mb3 t-14 t-black t-bold"],[12],[2,"\\n        "],[1,[32,1,["latestEvent","eventContent","subject"]]],[2,"\\n      "],[13],[2,"\\n      "],[8,"msg-spinmail@spinmail-reply-form",[],[["@conversation","@trackingType","@actionText","@actionURL","@isOneClickLeadGen","@isLeadGenFormSubmitted","@closeModal","@isHeader"],[[32,1],[32,0,["trackingType"]],[32,0,["actionText"]],[32,0,["actionURL"]],[32,0,["isOneClickLeadGen"]],[32,0,["isLeadGenFormSubmitted"]],[32,0,["onLeadGenFormSaved"]],true]],null],[2,"\\n    "],[13],[2,"\\n    "],[10,"div"],[14,0,"msg-spinmail-thread__message ph4 scrollable"],[14,"data-spinmail-trackingtype","bodyTracking"],[12],[2,"\\n      "],[10,"div"],[14,0,"msg-spinmail-thread__message-body-container mt2 relative"],[12],[2,"\\n"],[6,[37,5],[[32,3]],null,[["default","else"],[{"statements":[[2,"          "],[8,"ember-engines@link-to-external",[],[["@route","@model","@class"],["companies.company",[30,[36,4],[[32,1,["participants","firstObject","miniCompany","entityUrn"]]],null],"msg-entity-lockup__entity-title"]],[["default"],[{"statements":[[2,"\\n            "],[8,"ember-vector-images@lazy-background",[],[["@disableLazyLoad","@image","@alt","@title","@class","@ghostType","@desiredWidth"],[true,[30,[36,1],[[32,1,["latestEvent","from"]]],null],[30,[36,0],["i18n_spinmail_company_name","msg-spinmail/components/spinmail-thread"],[["names"],[[30,[36,2],[[32,1]],null]]]],[30,[36,0],["i18n_spinmail_company_name","msg-spinmail/components/spinmail-thread"],[["names"],[[30,[36,2],[[32,1]],null]]]],"EntityPhoto-square-2 msg-s-event-listitem__profile-picture","company",40]],null],[2,"\\n            "],[10,"div"],[15,0,[30,[36,3],["msg-spinmail-thread__name t-14 t-black t-bold hoverable-link-text"],null]],[12],[2,"\\n              "],[1,[30,[36,0],["i18n_spinmail_company_name","msg-spinmail/components/spinmail-thread"],[["names"],[[30,[36,2],[[32,1]],null]]]]],[2,"\\n            "],[13],[2,"\\n          "]],"parameters":[]}]]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"          "],[8,"ember-vector-images@lazy-background",[],[["@disableLazyLoad","@image","@alt","@title","@class","@ghostType","@desiredWidth"],[true,[30,[36,1],[[32,1,["latestEvent","from"]]],null],[30,[36,0],["i18n_spinmail_company_name","msg-spinmail/components/spinmail-thread"],[["names"],[[30,[36,2],[[32,1]],null]]]],[30,[36,0],["i18n_spinmail_company_name","msg-spinmail/components/spinmail-thread"],[["names"],[[30,[36,2],[[32,1]],null]]]],"msg-s-event-listitem__profile-picture EntityPhoto-circle-2","person",40]],null],[2,"\\n          "],[10,"div"],[15,0,[30,[36,3],["msg-spinmail-thread__name t-14 t-black t-bold"],null]],[12],[2,"\\n            "],[1,[30,[36,0],["i18n_spinmail_company_name","msg-spinmail/components/spinmail-thread"],[["names"],[[30,[36,2],[[32,1]],null]]]]],[2,"\\n          "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"        "],[10,"p"],[14,0,"msg-spinmail-thread__message-body t-14 t-black t-normal"],[15,"dir",[30,[36,7],[[32,1,["latestEvent","eventContent","subject"]]],null]],[12],[2,"\\n          "],[1,[32,0,["spinmailContent"]]],[2,"\\n        "],[13],[2,"\\n        "],[8,"msg-spinmail@spinmail-reply-form",[],[["@conversation","@trackingType","@actionText","@actionURL","@isOneClickLeadGen","@isLeadGenFormSubmitted","@closeModal"],[[32,1],[32,0,["trackingType"]],[32,0,["actionText"]],[32,0,["actionURL"]],[32,0,["isOneClickLeadGen"]],[32,0,["isLeadGenFormSubmitted"]],[32,0,["onLeadGenFormSaved"]]]],null],[2,"\\n      "],[13],[2,"\\n      "],[8,"msg-spinmail@legal-text",[[24,0,"mt5"]],[["@legalText","@actionTrackingPrefix","@conversation"],[[32,1,["latestEvent","eventContent","customContent","legalText"]],[32,4],[32,1]]],null],[2,"\\n\\n      "],[8,"msg-spinmail@spinmail-one-click-thank-you",[],[["@spinmail","@isLeadGenFormSubmitted"],[[32,1,["latestEvent","eventContent","customContent"]],[32,0,["isLeadGenFormSubmitted"]]]],null],[2,"\\n    "],[13],[2,"\\n"],[6,[37,5],[[32,1,["blocked"]]],null,[["default"],[{"statements":[[2,"      "],[8,"msg-ui@conversation-unspam",[],[["@conversation","@redirectToActiveConversation"],[[32,1],[32,2]]],null],[2,"\\n"]],"parameters":[]}]]]],"parameters":[]},{"statements":[[2,"    "],[8,"artdeco-empty-state@artdeco-empty-state",[],[["@illustration","@headline","@message"],["sad-browser",[30,[36,0],["conversation_not_available","msg-spinmail/components/spinmail-thread"],null],[30,[36,0],["conversation_not_available_explanation","msg-spinmail/components/spinmail-thread"],null]]],null],[2,"\\n"]],"parameters":[]}]]],[13]],"hasEval":false,"upvars":["t","msg-shared@get-member-or-company-picture","msg-shared@get-participant-names","concat","global-helpers@urn-to-id","if","ember-cli-pemberly-i18n@format-date","ember-cli-pemberly-i18n@bidi-dir","did-insert","did-update","on"]}',moduleName:"msg-spinmail/components/spinmail-thread.hbs"}),{THREAD_DETAIL_JUMP_TARGET:D,SPINMAIL:{CUSTOM_CONTENT:R,ACTIONED:j,TOUCHDOWN:z},SPINMAIL_I18N_KEYS:{LEAD_GEN_FORM_THANKYOU_CTA:U}}=l.default,F=`args.${R}`
let H=(p=Ember.inject.service("i18n"),u=Ember.inject.service("msg-data@data-manager"),g=Ember._tracked,b=Ember._tracked,f=Ember._tracked,h=Ember._tracked,v=Ember._tracked,_=Ember._tracked,y=Ember._tracked,T=Ember._action,k=Ember._action,E=Ember._action,C=Ember._action,x=class extends i.default{get trackingMap(){return{openTracking:Ember.get(this,`${F}.openTracking`),bodyTracking:Ember.get(this,`${F}.bodyTracking`),actionTracking:Ember.get(this,`${F}.subContent.actionTracking`),customLegalTextTracking:Ember.get(this,`${F}.legalText.customLegalTextTracking`),staticLegalTextTracking:Ember.get(this,`${F}.legalText.staticLegalTextTracking`),leadGenFormOpenTracking:Ember.get(this,`${F}.subContent.leadGenFormOpenTracking`)}}get spinmailContent(){return(0,o.default)(Ember.get(this,`${F}.body`))}get isOneClickLeadGen(){return Ember.get(this,`${F}.spInmailType`)===z}get isActioned(){return Ember.get(this,`${F}.status`)===j}get isLeadGenFormSubmitted(){return this.isOneClickLeadGen&&this.isActioned}_setOneClickLeadGenProperties(){const e=Ember.get(this,`${F}.subContent`)
if(e){const t="actionTracking"
if(this.isOneClickLeadGen){const n=Ember.get(e,"leadGenForm")
if(n)if(this.isLeadGenFormSubmitted){this.actionURL=jSecure.sanitizeUrl(Ember.get(n,"landingPage.url"))
this.actionText=this._getLeadGenCtaText(Ember.get(n,"thankYouCTA"))
this.leadTrackingParams=Ember.get(e,"leadTrackingParams")
this.trackingType=t}else{this.trackingType="leadGenFormOpenTracking"
this.actionText=Ember.get(e,"callToActionLabel")
this.leadTrackingParams=Ember.get(e,"leadTrackingParams")
this.leadGenForm=n}else this.isConversationValid=!1}else{const n=Ember.get(e,"action")
n&&(this.actionURL=jSecure.sanitizeUrl(n))
this.actionText=Ember.get(e,"actionText")
this.trackingType=t}}else this.isConversationValid=!1}_getLeadGenCtaText(e){const t=U[e]||U.VISIT_COMPANY_WEBSITE
return this.i18n.lookupTranslation("components/msg-spinmail@spinmail-thread",t)()}_fireTracking(e){return!Ember.testing&&(0,d.default)(e)}click(e){const t=e.target.closest("a")
if(t){const n="data-spinmail-trackingtype",a=t.closest(`[${n}]`).getAttribute(n),s=this.trackingMap[`${a}`]
"leadGenFormOpenTracking"===a&&e.preventDefault()
if(s){const n=t.classList.contains("msg-spinmail-reply-form__action-link"),a="_blank"===t.getAttribute("target")
if(n||a)this._fireTracking(s)
else{e.preventDefault()
Ember.run((()=>{this._fireTracking(s).finally((()=>{(0,r.default)().href=jSecure.sanitizeUrl(t.href)}))}))}}}}constructor(){super(...arguments);(0,t.default)(this,"i18n",L,this);(0,t.default)(this,"msgDataManager",S,this);(0,n.default)(this,"rumComponentId","messaging/spinmail-thread");(0,t.default)(this,"trackingType",M,this);(0,t.default)(this,"isConversationValid",O,this);(0,t.default)(this,"_lastSeenConversationId",P,this);(0,t.default)(this,"actionURL",G,this);(0,t.default)(this,"actionText",w,this);(0,t.default)(this,"leadGenForm",A,this);(0,t.default)(this,"leadTrackingParams",N,this)
Ember.testing&&this.args._fireTracking&&(this._fireTracking=this.args._fireTracking)
this.trackingMap.openTracking&&this._fireTracking(this.trackingMap.openTracking)
this._setOneClickLeadGenProperties()}handleUpdating(){this.isConversationValid=!0
this.trackingMap.openTracking&&this._fireTracking(this.trackingMap.openTracking)
this._setOneClickLeadGenProperties()}handleRendering(e){this._element=e
const t=this.args.conversation.id
this._shouldSetFocus(t)&&(0,m.mutateDOM)((()=>{if(!this.isDestroying&&c.default){const e=this._element.querySelector(D)
e&&document.activeElement!==e&&e.focus()}}))
this._lastSeenConversationId=t}onLeadGenFormSaved(e){e.then((()=>{const e=Ember.get(this,`${F}.subContent.leadGenForm`)
if(Ember.get(e,"submitted")){this.msgDataManager.markSpinmailActioned(Ember.get(this.args.conversation,"entityUrn"))
if(this.isDestroying)return
this.actionURL=jSecure.sanitizeUrl(Ember.get(e,"landingPage.url"))
this.trackingType="actionTracking"
this.actionText=this._getLeadGenCtaText(Ember.get(e,"thankYouCTA"))}}))}_shouldSetFocus(e){return!this._lastSeenConversationId||this._lastSeenConversationId!==e}},L=(0,a.default)(x.prototype,"i18n",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,a.default)(x.prototype,"msgDataManager",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,a.default)(x.prototype,"trackingType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"actionTracking"}}),O=(0,a.default)(x.prototype,"isConversationValid",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=(0,a.default)(x.prototype,"_lastSeenConversationId",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,a.default)(x.prototype,"actionURL",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=(0,a.default)(x.prototype,"actionText",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=(0,a.default)(x.prototype,"leadGenForm",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=(0,a.default)(x.prototype,"leadTrackingParams",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.default)(x.prototype,"click",[T],Object.getOwnPropertyDescriptor(x.prototype,"click"),x.prototype),(0,a.default)(x.prototype,"handleUpdating",[k],Object.getOwnPropertyDescriptor(x.prototype,"handleUpdating"),x.prototype),(0,a.default)(x.prototype,"handleRendering",[E],Object.getOwnPropertyDescriptor(x.prototype,"handleRendering"),x.prototype),(0,a.default)(x.prototype,"onLeadGenFormSaved",[C],Object.getOwnPropertyDescriptor(x.prototype,"onLeadGenFormSaved"),x.prototype),x)
e.default=H
Ember._setComponentTemplate(I,H)}))
define("msg-spinmail/components/sponsored-conversation-bubble",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@glimmer/component","msg-spinmail-data/utils/sponsored-conversation-properties","msg-ui/utils/conversation-properties","global-utils/utils/api-compat","msg-shared/utils/constants","msg-shared/utils/custom-tracking","msg-shared/utils/get-participant-presence-statuses"],(function(e,t,n,a,s,i,r,o,l,m,c,d){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var p,u,g,b,f,h,v,_,y,T,k,E,C,x,L,S
const M=Ember.HTMLBars.template({id:"+ZZNb9HV",block:'{"symbols":["scroller","list","@conversation","@isCompanySender"],"statements":[[8,"msg-ui@message-list-scroller",[],[["@conversation","@latestEvent","@typingParticipants","@loadMore"],[[32,3],[32,3,["latestEvent"]],[32,3,["typingParticipants"]],[32,0,["loadMoreMessages"]]]],[["default"],[{"statements":[[2,"\\n  "],[8,"msg-ui@message-list",[],[["@isOverlay","@isLoading","@conversation","@isCompanySender","@showQuickReplies","@resendMessage"],[true,[32,1,["props","isLoading"]],[32,3],[32,4],false,[32,0,["resendMessage"]]]],[["default"],[{"statements":[[2,"\\n"],[6,[37,2],[[30,[36,1],[[32,2,["props","groupedEvent","event","subtype"]],"SPONSORED_MESSAGE"],null]],null,[["default"],[{"statements":[[2,"      "],[8,"msg-spinmail@sponsored-conversation/sponsored-message-actions",[],[["@conversation","@customContent","@saveSponsoredMessageReply"],[[32,3],[32,2,["props","groupedEvent","event","eventContent","customContent"]],[32,0,["replyToSponsoredMessage"]]]],null],[2,"\\n"]],"parameters":[]}]]],[2,"  "]],"parameters":[2]}]]],[2,"\\n\\n"],[6,[37,2],[[32,1,["props","hasNewMessages"]]],null,[["default"],[{"statements":[[2,"    "],[10,"div"],[14,0,"msg-s-message-list__new-message msg-animation__indicator"],[12],[2,"\\n      "],[10,"span"],[14,0,"visually-hidden"],[12],[2,"\\n        "],[1,[30,[36,0],["a11y_new_messages","msg-spinmail/components/sponsored-conversation-bubble"],null]],[2,"\\n      "],[13],[2,"\\n      "],[8,"artdeco-button@artdeco-button",[],[["@type","@class","@size","@controlType","@click","@icon"],["primary","msg-s-message-list__new-message-button block",1,"button",[32,1,["actions","scrollToNewMessages"]],"arrow-down-icon"]],[["default"],[{"statements":[[2,"\\n        "],[1,[30,[36,0],["i18n_new_messages_v2","msg-spinmail/components/sponsored-conversation-bubble"],null]],[2,"\\n      "]],"parameters":[]}]]],[2,"\\n    "],[13],[2,"\\n"]],"parameters":[]}]]]],"parameters":[1]}]]],[2,"\\n\\n"],[8,"msg-spinmail@legal-text",[[24,0,"mh4"]],[["@legalText","@isSponsoredConversation","@conversation"],[[32,0,["legalText"]],[30,[36,3],[[32,3]],null],[32,3]]],null],[2,"\\n"],[6,[37,2],[[32,3,["blocked"]]],null,[["default"],[{"statements":[[2,"  "],[8,"msg-ui@conversation-unspam",[],[["@conversation"],[[32,3]]],null],[2,"\\n"]],"parameters":[]}]]]],"hasEval":false,"upvars":["t","global-helpers@eq","if","msg-shared@is-sponsored-conversation"]}',moduleName:"msg-spinmail/components/sponsored-conversation-bubble.hbs"}),{ACTION_TYPES:O,CONTROL_NAMES:P}=m.default
let G=(p=Ember.inject.service("msg-data@data-manager"),u=Ember.inject.service("global-services@a11y-notification"),g=Ember.inject.service("i18n"),b=Ember.inject.service("lix"),f=Ember.inject.service("tracking"),h=Ember.inject.service("authentication@authenticated-user"),v=Ember._action,_=Ember._action,y=Ember._action,T=class extends i.default{constructor(){super(...arguments);(0,t.default)(this,"msgDataManager",k,this);(0,t.default)(this,"a11yNotification",E,this);(0,t.default)(this,"i18n",C,this);(0,t.default)(this,"lix",x,this);(0,t.default)(this,"tracking",L,this);(0,t.default)(this,"authenticatedUser",S,this)}get legalText(){return(0,r.getSponsoredConversationLegalTextFromConversation)(this.args.conversation)}a11yNotify(e){const t=this.i18n.lookupTranslation("components/msg-ui@i18n-shared",e)
this.a11yNotification.setTextInLiveRegion(t([]))}loadMoreMessages(){return this.args.conversation&&Ember.get(this.args,"conversation.id")?this.msgDataManager.getEventCollection(Ember.get(this.args,"conversation.id")).fetchAndLoadMore():Ember.RSVP.reject()}resendMessage(e){Ember.set(e,"createdAt",Date.now())
this.msgDataManager.retrySaveMessage(Ember.get(e,"entityUrn"))}replyToSponsoredMessage(e){e.messageReplyType=(0,o.getReplyMessageType)(this.args.conversation)
e.receivedMessage=this.newestMessage
e.senderID=(0,l.entityUrnToId)(Ember.get(this,"authenticatedUser.miniProfile.entityUrn"))
e.conversation=this.args.conversation
c.default.fireDetailActionEvent({actionType:O.SEND_MESSAGE,controlName:P.CONVERSATION.SEND,conversationObjectUrn:Ember.get(e.conversation,"backendUrn"),participantUrns:c.default.getParticipantTrackingUrns(Ember.get(e.conversation,"participants")),participantPresenceStatuses:(0,d.getParticipantPresenceStatuses)(e.conversation),trackingService:this.tracking})
const t=Ember.get(e.conversation,"participants").map((e=>(0,l.entityUrnToId)(Ember.get(e,"miniProfile.entityUrn"))))
e.senderID=Ember.get(this,"authenticatedUser.miniProfile.entityUrn")
const n=e
return this.msgDataManager.createAndSaveMessageEvent({participants:t,conversationUrn:Ember.get(this.args.conversation,"entityUrn"),msgData:n}).then((()=>{this.a11yNotify("i18n_a11y_send_successful")})).catch((e=>{this.a11yNotify("i18n_a11y_send_failure")
throw e}))}},k=(0,a.default)(T.prototype,"msgDataManager",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,a.default)(T.prototype,"a11yNotification",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,a.default)(T.prototype,"i18n",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,a.default)(T.prototype,"lix",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,a.default)(T.prototype,"tracking",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,a.default)(T.prototype,"authenticatedUser",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.default)(T.prototype,"loadMoreMessages",[v],Object.getOwnPropertyDescriptor(T.prototype,"loadMoreMessages"),T.prototype),(0,a.default)(T.prototype,"resendMessage",[_],Object.getOwnPropertyDescriptor(T.prototype,"resendMessage"),T.prototype),(0,a.default)(T.prototype,"replyToSponsoredMessage",[y],Object.getOwnPropertyDescriptor(T.prototype,"replyToSponsoredMessage"),T.prototype),T)
e.default=G
Ember._setComponentTemplate(M,G)}))
define("msg-spinmail/components/sponsored-conversation-thread",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const t=Ember.HTMLBars.template({id:"29LBZKYK",block:'{"symbols":["scroller","list","@conversation","@redirectToActiveConversation","@saveSponsoredMessageReply","@loadMore","@resendMessage","@renderThread"],"statements":[[2,"\\n"],[6,[37,4],[[32,8]],null,[["default","else"],[{"statements":[[2,"  "],[10,"div"],[14,0,"msg-sponsored-conversation-thread"],[12],[2,"\\n    "],[10,"h2"],[14,0,"visually-hidden"],[12],[2,"\\n      "],[1,[30,[36,0],["i18n_a11y_message_list","msg-spinmail/components/sponsored-conversation-thread"],null]],[2,"\\n    "],[13],[2,"\\n    "],[8,"msg-ui@message-list-scroller",[],[["@conversation","@latestEvent","@typingParticipants","@loadMore"],[[32,3],[32,3,["latestEvent"]],[32,3,["typingParticipants"]],[32,6]]],[["default"],[{"statements":[[2,"\\n      "],[8,"msg-ui@message-list",[],[["@isLoading","@conversation","@isCompanySender","@showQuickReplies","@resendMessage"],[[32,1,["props","isLoading"]],[32,3],[30,[36,2],[[32,3,["participants","firstObject"]]],null],false,[32,7]]],[["default"],[{"statements":[[2,"\\n"],[6,[37,4],[[30,[36,3],[[32,2,["props","groupedEvent","event","subtype"]],"SPONSORED_MESSAGE"],null]],null,[["default"],[{"statements":[[2,"          "],[8,"msg-spinmail@sponsored-conversation/sponsored-message-actions",[],[["@conversation","@customContent","@saveSponsoredMessageReply"],[[32,3],[32,2,["props","groupedEvent","event","eventContent","customContent"]],[32,5]]],null],[2,"\\n"]],"parameters":[]}]]],[2,"      "]],"parameters":[2]}]]],[2,"\\n\\n"],[6,[37,4],[[32,1,["props","hasNewMessages"]]],null,[["default"],[{"statements":[[2,"        "],[10,"div"],[14,0,"msg-s-message-list__new-message msg-animation__indicator"],[12],[2,"\\n          "],[10,"span"],[14,0,"visually-hidden"],[12],[2,"\\n            "],[1,[30,[36,0],["i18n_new_messages_v2","msg-spinmail/components/sponsored-conversation-thread"],null]],[2,"\\n          "],[13],[2,"\\n          "],[8,"artdeco-button@artdeco-button",[[4,[38,1],["click",[32,1,["actions","scrollToNewMessages"]]],null]],[["@class","@size","@controlType","@icon"],["msg-s-message-list__new-message-button block",1,"button","arrow-down-icon"]],[["default"],[{"statements":[[2,"\\n            "],[1,[30,[36,0],["i18n_new_messages_v2","msg-spinmail/components/sponsored-conversation-thread"],null]],[2,"\\n          "]],"parameters":[]}]]],[2,"\\n        "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"    "]],"parameters":[1]}]]],[2,"\\n    "],[8,"msg-spinmail@legal-text",[[24,0,"mh4"]],[["@legalText","@isSponsoredConversation","@conversation"],[[30,[36,5],[[32,3]],null],[30,[36,6],[[32,3]],null],[32,3]]],null],[2,"\\n"],[6,[37,4],[[32,3,["blocked"]]],null,[["default"],[{"statements":[[2,"      "],[8,"msg-ui@conversation-unspam",[],[["@conversation","@redirectToActiveConversation"],[[32,3],[32,4]]],null],[2,"\\n"]],"parameters":[]}]]],[2,"  "],[13],[2,"\\n"]],"parameters":[]},{"statements":[[2,"  "],[8,"artdeco-loader@artdeco-loader",[],[["@size"],["small"]],null],[2,"\\n"]],"parameters":[]}]]]],"hasEval":false,"upvars":["t","on","msg-shared@is-company-profile","global-helpers@eq","if","msg-spinmail@get-legal-text-from-sponsored-conversation","msg-shared@is-sponsored-conversation"]}',moduleName:"msg-spinmail/components/sponsored-conversation-thread.hbs"})
var n=Ember._setComponentTemplate(t,Ember._templateOnlyComponent())
e.default=n}))
define("msg-spinmail/components/sponsored-conversation/sponsored-message-actions",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const t=Ember.HTMLBars.template({id:"FqjhjKY5",block:'{"symbols":["sponsoredMessageOption","optionIndex","@customContent","@conversation","@saveSponsoredMessageReply"],"statements":[[10,"div"],[14,0,"msg-s-sponsored-message-actions mb1"],[12],[2,"\\n"],[6,[37,2],[[32,3]],null,[["default"],[{"statements":[[6,[37,1],[[30,[36,0],[[30,[36,0],[[32,3,["sponsoredMessageOptions"]]],null]],null]],null,[["default"],[{"statements":[[2,"      "],[8,"msg-spinmail@sponsored-conversation/sponsored-message-option",[],[["@option","@optionIndex","@sponsoredMessageTrackingId","@sponsoredConversationMetadata","@conversation","@saveSponsoredMessageReply","@customContent"],[[32,1],[32,2],[32,3,["sponsoredMessageTrackingId"]],[32,4,["sponsoredConversationMetadata"]],[32,4],[32,5],[32,3]]],null],[2,"\\n"]],"parameters":[1,2]}]]]],"parameters":[]}]]],[13]],"hasEval":false,"upvars":["-track-array","each","if"]}',moduleName:"msg-spinmail/components/sponsored-conversation/sponsored-message-actions.hbs"})
var n=Ember._setComponentTemplate(t,Ember._templateOnlyComponent())
e.default=n}))
define("msg-spinmail/components/sponsored-conversation/sponsored-message-option",["exports","@babel/runtime/helpers/esm/initializerDefineProperty","@babel/runtime/helpers/esm/defineProperty","@babel/runtime/helpers/esm/applyDecoratedDescriptor","@babel/runtime/helpers/esm/initializerWarningHelper","@glimmer/component","msg-shared/utils/constants","msg-spinmail-data/utils/sponsored-conversation-properties","msg-spinmail-data/utils/lix"],(function(e,t,n,a,s,i,r,o,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var m,c,d,p,u,g,b,f,h,v,_,y,T,k,E,C,x,L,S,M,O,P,G
const w=Ember.HTMLBars.template({id:"IzrPu/Ge",block:'{"symbols":["assetLoader","@option"],"statements":[[10,"div"],[14,0,"mt2"],[12],[2,"\\n"],[6,[37,0],[[32,0,["isExternalWebsite"]]],null,[["default","else"],[{"statements":[[2,"    "],[8,"ember-cli-pemberly-tracking@shared/external-link",[[4,[38,2],["sponsored_message_external_link"],null],[4,[38,1],["click",[32,0,["performOptionClickAction"]]],null]],[["@href","@target","@class"],[[32,0,["externalWebsiteUrl"]],"_blank","artdeco-button artdeco-button--secondary artdeco-button--2"]],[["default"],[{"statements":[[2,"\\n      "],[1,[30,[36,4],null,[["class","type","size","a11y-text"],["li-icon-wrap artdeco-button__icon","link-external-icon","small",[30,[36,3],["a11y_external_link","msg-spinmail/components/sponsored-conversation/sponsored-message-option"],null]]]]],[2,"\\n      "],[1,[32,2,["optionText","text"]]],[2,"\\n    "]],"parameters":[]}]]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"    "],[8,"artdeco-button@artdeco-button",[[4,[38,1],["click",[32,0,["performOptionClickAction"]]],null]],[["@class","@type","@size","@controlType"],["artdeco-button artdeco-button--secondary artdeco-button--2","secondary","2","button"]],[["default"],[{"statements":[[2,"\\n      "],[1,[32,2,["optionText","text"]]],[2,"\\n    "]],"parameters":[]}]]],[2,"\\n"]],"parameters":[]}]]],[2,"\\n"],[6,[37,0],[[32,0,["isLeadGeneration"]]],null,[["default"],[{"statements":[[2,"    "],[8,"asset-loader@deferred-asset-loader",[],[["@bundle"],["lead-gen"]],[["default"],[{"statements":[[2,"\\n"],[6,[37,0],[[32,1,["state","fulfilled"]]],null,[["default"],[{"statements":[[2,"        "],[8,"lead-gen@lead-gen-modal",[],[["@isOpen","@leadGenForm","@leadTrackingParams","@closeModal","@leadTrackingCode","@pageKey","@sponsoredLeadgenFormActionEventOverrides"],[[32,0,["isLeadGenFormModalOpen"]],[32,2,["leadGenForm"]],[32,0,["leadTrackingParamsWithNodeTracking"]],[32,0,["notifyLeadGenFormSubmitted"]],[32,0,["leadTrackingCode"]],[32,0,["pageKey"]],[32,0,["sponsoredLeadgenFormActionEventOverrides"]]]],null],[2,"\\n"]],"parameters":[]}]]],[2,"    "]],"parameters":[1]}]]],[2,"\\n"]],"parameters":[]}]]],[13]],"hasEval":false,"upvars":["if","on","ember-cli-pemberly-tracking@track-interaction","t","artdeco-icons-web@li-icon"]}',moduleName:"msg-spinmail/components/sponsored-conversation/sponsored-message-option.hbs"}),{MESSAGE_TYPE:A,SPONSORED_MESSAGE_OPTION_TYPES:N,SPONSORED_TRACKING:{ACTIONS:I}}=r.default
let D=(m=Ember.inject.service("i18n"),c=Ember.inject.service("jet"),d=Ember.inject.service("global-services@global-http-headers"),p=Ember.inject.service("msg-spinmail-data@sponsored-action-tracking"),u=Ember.inject.service("lix"),g=Ember.inject.service("msg-shared@component-context"),b=Ember.inject.service("tracking"),f=Ember._tracked,h=Ember._tracked,v=Ember._tracked,_=Ember._action,y=Ember._action,T=class extends i.default{constructor(){super(...arguments);(0,t.default)(this,"i18n",k,this);(0,t.default)(this,"jet",E,this);(0,t.default)(this,"globalHttpHeaders",C,this);(0,t.default)(this,"sponsoredActionTracking",x,this);(0,t.default)(this,"lix",L,this);(0,t.default)(this,"msgComponentContextService",S,this);(0,t.default)(this,"tracking",M,this);(0,t.default)(this,"isLeadGenFormModalOpen",O,this);(0,t.default)(this,"leadTrackingParamsWithNodeTracking",P,this);(0,t.default)(this,"leadTrackingCode",G,this)}get isExternalWebsite(){return Ember.get(this.args,"option.clickAction")===N.EXTERNAL_WEBSITE}get isLeadGeneration(){return Ember.get(this.args,"option.clickAction")===N.LEAD_GENERATION}get externalWebsiteUrl(){var e
const t=null!==(e=Ember.get(this.args,"option.advertiserUrl"))&&void 0!==e?e:""
return t?jSecure.sanitizeUrl(t):t}_sendReplyMessage(e){const t={extensionContentType:A.SPONSORED_MESSAGE_REPLY,sponsoredMessageOptionUrn:Ember.get(e,"sponsoredMessageOptionUrn")},n={messageReplyType:A.SPONSORED_MESSAGE_REPLY,adapterOptions:{sponsoredMessageReplyExtension:t},conversation:this.args.conversation,message:Ember.get(e,"optionText.text")}
this.args.saveSponsoredMessageReply(n).catch((e=>{this.jet.error(e,["msg-custom-err-log","conversation-ad"])
throw e}))}_getI18NMessageBody(e,t){return this.i18n.lookupTranslation("components/msg-spinmail@sponsored-conversation/sponsored-message-option",e)([{optionText:t}])}performOptionClickAction(){var e
let t=I.SIMPLE_REPLY,n="reply_send"
const a={sponsoredConvoId:Ember.get(this.args.sponsoredConversationMetadata,"sponsoredConversationTrackingId"),sponsoredMessageContentId:this.args.sponsoredMessageTrackingId,optionClickedIndex:this.args.optionIndex}
if(this.isLeadGeneration){t=I.LEAD_FORM_OPEN
const e=Ember.get(this.args,"option.leadTrackingParams")
if(e){const t=(0,o.addNodeLevelTrackingParams)(this.jet,e,a)
if(this.isTrackingDualWriteLixControl())this.leadTrackingParamsWithNodeTracking=t
else if(this.isTrackingDualWriteTreatmentEnabled()){this.leadTrackingParamsWithNodeTracking=t
this.initLeadTrackingCode(e)}else this.initLeadTrackingCode(e)}this.isLeadGenFormModalOpen=!0
n="spin_form_view"}else{if(this.isExternalWebsite){t=I.CTA_CLICK
n="cta_button"}this._sendReplyMessage(this.args.option)}a.action=t
a.sponsoredMetadata=Ember.get(this.args.sponsoredConversationMetadata,"sponsoredTracking")
a.sponsoredMessageContentUrn=Ember.get(this.args.customContent,"sponsoredMessageContentUrn")
this.sponsoredActionTracking.fireNodeLevelAdvertiserTracking(this.globalHttpHeaders,this.jet,null!==(e=Ember.get(this.args.sponsoredConversationMetadata,"clickTrackingUrl"))&&void 0!==e?e:"",n,a)}notifyLeadGenFormSubmitted(e){e?e.then((()=>{this._sendReplyMessage(this.args.option)})):this.isLeadGenFormModalOpen=!1}isTrackingDualWriteLixControl(){return this.lix.getTreatment(l.LIX_MESSAGING_TRACKING_DUEL_WRITES.KEY)===l.LIX_MESSAGING_TRACKING_DUEL_WRITES.TREATMENTS.CONTROL}isTrackingDualWriteTreatmentEnabled(){return this.lix.getTreatment(l.LIX_MESSAGING_TRACKING_DUEL_WRITES.KEY)===l.LIX_MESSAGING_TRACKING_DUEL_WRITES.TREATMENTS.DUAL_WRITE}get pageKey(){const e=this.msgComponentContextService.isOverlay?"messaging_overlay":"not_messaging_overlay"
return`${this.tracking.getCurrentPageKey()}_${e}_sponsored_message_option_lead_gen_form_in_messaging`}get sponsoredLeadgenFormActionEventOverrides(){return this.args.customContent.sponsoredMessageContentUrn?{sponsoredMessageInfo:{sponsoredMessageContentUrn:this.args.customContent.sponsoredMessageContentUrn,optionClickedIndex:this.args.optionIndex}}:{}}initLeadTrackingCode(e){if(this.args.option.leadTackingCode)this.leadTrackingCode=this.args.option.leadTackingCode
else{const t=new URL(e).searchParams
this.leadTrackingCode=t.get("lTrk")}}},k=(0,a.default)(T.prototype,"i18n",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=(0,a.default)(T.prototype,"jet",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=(0,a.default)(T.prototype,"globalHttpHeaders",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=(0,a.default)(T.prototype,"sponsoredActionTracking",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=(0,a.default)(T.prototype,"lix",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=(0,a.default)(T.prototype,"msgComponentContextService",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=(0,a.default)(T.prototype,"tracking",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=(0,a.default)(T.prototype,"isLeadGenFormModalOpen",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=(0,a.default)(T.prototype,"leadTrackingParamsWithNodeTracking",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=(0,a.default)(T.prototype,"leadTrackingCode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.default)(T.prototype,"performOptionClickAction",[_],Object.getOwnPropertyDescriptor(T.prototype,"performOptionClickAction"),T.prototype),(0,a.default)(T.prototype,"notifyLeadGenFormSubmitted",[y],Object.getOwnPropertyDescriptor(T.prototype,"notifyLeadGenFormSubmitted"),T.prototype),T)
e.default=D
Ember._setComponentTemplate(w,D)}))
define("msg-spinmail/components/sponsored-pillar-title-bar",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
const t=Ember.HTMLBars.template({id:"tLoidzpG",block:'{"symbols":["&default","@conversation","@redirectToActiveConversation","@enableReportingSponsoredConversation"],"statements":[[8,"title-bar@title-bar",[],[["@bemPrefix","@icon"],["msg-title-bar","arrow-left-icon"]],[["default"],[{"statements":[[2,"\\n"],[6,[37,2],[[30,[36,1],[[32,2,["participants","firstObject"]]],null]],null,[["default","else"],[{"statements":[[2,"    "],[8,"ember-engines@link-to-external",[[24,0,"truncate flex-1"]],[["@route","@model"],["companies.company",[30,[36,0],[[32,2,["participants","firstObject","miniCompany","entityUrn"]]],null]]],[["default"],[{"statements":[[2,"\\n      "],[18,1,null],[2,"\\n    "]],"parameters":[]}]]],[2,"\\n"]],"parameters":[]},{"statements":[[2,"    "],[10,"div"],[14,0,"truncate flex-1"],[12],[2,"\\n      "],[18,1,null],[2,"\\n    "],[13],[2,"\\n"]],"parameters":[]}]]],[2,"  "],[8,"msg-shared-modals@thread-actions",[],[["@conversation","@redirectToActiveConversation","@enableReportingSponsoredConversation"],[[32,2],[32,3],[32,4]]],null],[2,"\\n"]],"parameters":[]}]]]],"hasEval":false,"upvars":["global-helpers@urn-to-id","msg-shared@is-company-profile","if"]}',moduleName:"msg-spinmail/components/sponsored-pillar-title-bar.hbs"})
var n=Ember._setComponentTemplate(t,Ember._templateOnlyComponent())
e.default=n}))
define("msg-spinmail/config/environment",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
let t
try{const e="msg-spinmail/config/environment",n=document.querySelector('meta[name="'+e+'"]').getAttribute("content")
t=JSON.parse(unescape(n))}catch(e){t={}}var n=t
e.default=n}))
define.alias("ember-named-blocks-polyfill/helpers/-has-block-params","msg-spinmail/helpers/-has-block-params")
define.alias("ember-named-blocks-polyfill/helpers/-has-block","msg-spinmail/helpers/-has-block")
define.alias("ember-named-blocks-polyfill/helpers/-is-named-block-invocation","msg-spinmail/helpers/-is-named-block-invocation")
define.alias("ember-named-blocks-polyfill/helpers/-named-block-invocation","msg-spinmail/helpers/-named-block-invocation")
define.alias("ember-cli-pemberly-i18n/helpers/format-number","msg-spinmail/helpers/format-number")
define("msg-spinmail/helpers/get-legal-text-from-sponsored-conversation",["exports","msg-spinmail-data/utils/sponsored-conversation-properties"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var n=Ember.Helper.helper((e=>{let[n]=e
return(0,t.getSponsoredConversationLegalTextFromConversation)(n)}))
e.default=n}))
define("msg-spinmail/helpers/is-reporting-sponsored-inmail-enabled",["exports","msg-spinmail-data/utils/sponsored-conversation-properties"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var n=Ember.Helper.helper((e=>{let[n]=e
return(0,t.enableReportingSponsoredInMail)(n)}))
e.default=n}))
define("msg-spinmail/helpers/is-reporting-sponsored-message-enabled",["exports","msg-spinmail-data/utils/sponsored-conversation-properties"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
var n=Ember.Helper.helper((e=>{let[n]=e
return(0,t.enableReportingSponsoredMessage)(n)}))
e.default=n}))
define.alias("artdeco-icons-web/helpers/li-icon","msg-spinmail/helpers/li-icon")
define.alias("ember-app-scheduler/helpers/route-idle","msg-spinmail/helpers/route-idle")
define.alias("ember-set-helper/helpers/set","msg-spinmail/helpers/set")
define.alias("ember-cli-pemberly-i18n/helpers/t","msg-spinmail/helpers/t")
define("msg-spinmail/initializers/artdeco",["exports","artdeco-eyeglass"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
e.initialize=s
const n=[t.default.contextClasses,t.default.floatingLabel,t.default.focusOutline]
function a(e,t){const a=e[t]
e[t]=function(){n.forEach((e=>e&&"function"==typeof e.teardown&&e.teardown()))
a&&"function"==typeof a&&a.call(e)}}function s(e){if("undefined"!=typeof document){n.forEach((e=>e.install()))
"function"==typeof e.willDestroy?a(e,"willDestroy"):"function"==typeof e.destroy&&a(e,"destroy")}}var i={name:"artdeco",initialize:s}
e.default=i}))
define("msg-spinmail/initializers/icons",["exports","artdeco-icons-web/src/icons","msg-spinmail/config/environment"],(function(e,t,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
function a(e){throw e}var s={name:"icons",initialize:function(){const{environment:e,APP:s}=n.default
let i,r
s&&({artdecoCustomSpriteUrl:i,artdecoCustomSpriteName:r}=s)
const o="test"!==e
t.default.load(o,i,r).catch(a)}}
e.default=s}))
define("msg-spinmail/initializers/override-safestring",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
e.default=void 0
e.initialize=s
const t="ember-glimmer",n="ember-htmlbars/utils/string",a="@ember/-internals/glimmer"
function s(){let e,s=Ember.__loader.require.has
if(s(a))e=Ember.__loader.require(a).SafeString
else if(s(t))e=Ember.__loader.require(t).SafeString
else{if(!s(n))throw new Error("Cannot locate SafeString class for overriding")
e=Ember.__loader.require(n).SafeString}e.prototype.toHTML=function(){return jSecure.sanitizeHTML(this.toString())}
e.prototype.toString=function(){return`${this.string}`}}var i={name:"override-safestring",initialize:s}
e.default=i}))
define.alias("@ember/render-modifiers/modifiers/did-insert","msg-spinmail/modifiers/did-insert")
define.alias("@ember/render-modifiers/modifiers/did-update","msg-spinmail/modifiers/did-update")
define.alias("@ember/render-modifiers/modifiers/will-destroy","msg-spinmail/modifiers/will-destroy")
define.alias("client-sensor-web/services/client-sensor","msg-spinmail/services/client-sensor")
define.alias("client-sensor-web/utils/helpers","msg-spinmail/utils/helpers")

//# sourceMappingURL=engine.map